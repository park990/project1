<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">

    <select id="st_login" resultType="pm.vo.MemberVO" parameterType="Map">
        select * from member_t where mem_id =#{ID} and mem_pw =#{PW} and adno is null;
    </select>

    <select id="adm_login" resultType="pm.vo.MemberVO" parameterType="Map">
        select * from member_t where mem_id =#{ID} and mem_pw =#{PW} and stdno is null;
    </select>

<!--*************************************** 여기서 부터는 findFrame에 들어갈 sql************************************************************************-->

    <!--학생의 정보 찾기********************************-->

    <select id="find_st_ID" resultType="pm.vo.MemberVO" parameterType="String">
        select mem_id from member_t where mem_bkCode =#{n} and adno is null;
    </select>

    <select id="find_st_PW" resultType="pm.vo.MemberVO" parameterType="Map">
        select mem_pw from member_t where mem_bkCode=#{bc} and mem_id=#{ID} and adno is null;
    </select>



    <!--강사의 정보 찾기********************************-->

    <select id="find_ad_ID" resultType="pm.vo.MemberVO" parameterType="String">
        select mem_id from member_t where mem_bkCode =#{n} and stdno is null;
    </select>

    <select id="find_ad_PW" resultType="pm.vo.MemberVO" parameterType="Map">
        select mem_pw from member_t where mem_bkCode=#{bc} and mem_id=#{ID} and stdno is null;
    </select>

    <insert id="insertMember" parameterType="pm.vo.MemberVO">
        INSERT INTO member_t (
        mem_id, mem_pw, mem_quit, mem_joindate, mem_role,
        mem_name, mem_gender, mem_phone, mem_birth, mem_bkCode,
        mem_email, mem_address, stdno, adno, mem_admin_inputOrNot)
        VALUES (
        #{mem_id}, #{mem_pw}, #{mem_quit}, NOW(), #{mem_role},
        #{mem_name}, #{mem_gender}, #{mem_phone}, #{mem_birth}, #{mem_bkCode},
        #{mem_email}, #{mem_address}, #{stdno}, #{adno}, #{mem_admin_inputOrNot})
    </insert>

    <!--중복된 id 검색**********************************-->
    <select id = "checkId" resultType="int" parameterType="String">
        SELECT COUNT(*) FROM member_t WHERE mem_id = #{value}
    </select>

    <!--*********************재윤**************************result MAP 활용***************-->
    <select id = "ID" resultType="pm.vo.MemberVO" parameterType="String">
        SELECT mem_id FROM member_t WHERE stdno = #{value} and adno is null
    </select>

    <select id = "adID" resultType="pm.vo.MemberVO" parameterType="String">
        SELECT mem_id FROM member_t WHERE adno = #{value} and stdno is null
    </select>
<!--id == "ID"인 select문은 학생의 ID를 표출하는 resultMap 활용 아래의 adID는 강사의 ID를 표출하는 거 resultmpa 활용 안했음-->

</mapper>



