<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="result">
    <!--result_t에 값 저장하기 위해 추가 -->
    <insert id="insert_re" parameterType="pm.vo.result_tVO">
        INSERT INTO result_t (ques_num, test_idx, stdno, result_t_idx, score)
        VALUES (#{ques_num}, #{test_idx}, #{stdno}, #{result_t_idx}, #{score})
    </insert>

    <!--시험 결과 점수 가져오기 위해 추가 선영0629-->
    <select id = "selectTestScore" parameterType="pm.vo.result_tVO" resultType="pm.vo.result_tVO">
        SELECT r.test_idx, r.stdno, t.test_name, t.lec_no, r.score
        FROM result_t r INNER JOIN test_t t
        ON r.test_idx = t.test_idx
        WHERE r.test_idx = #{test_idx} AND r.stdno = #{stdno} AND t.lec_no = #{lec_no};
    </select>
    <!-- 시험 결과 중복 저장 방지를 위해 추가 -->
    <select id = "re_exist" parameterType="pm.vo.result_tVO" resultType="pm.vo.result_tVO">
        SELECT ques_num, test_idx, stdno, result_t_idx, score
        FROM result_t
        WHERE stdno = ${stdno} AND test_idx = #{test_idx}
    </select>
</mapper>